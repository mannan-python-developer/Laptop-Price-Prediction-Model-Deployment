<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Laptop Price Predictor</title>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
          integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
</head>
<body class="bg-dark">

<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-10">
            <div class="card mt-5">
                <div class="card-header" style="text-align: center">
                    <h1>Welcome to Laptop Price Predictor</h1>
                </div>
                <div class="card-body">
                    <h5 class="card-title text-center">This app predicts the price of a laptop you want to buy/sell. Try filling the details below:</h5>
                    <form method="post" accept-charset="utf-8" name="Modelform">
                        <div class="row">
                            <div class="col-md-6">
                                <!-- First Column -->

                                <div class="form-group">
                                    <label for="Companies"><b>Select the company:</b></label>
                                    <select class="selectpicker form-control" id="Companies" name="company" required="1">
                                        <option value="" selected disabled>Select Company</option>
                                        {% for company in Companies %}
                                            <option value="{{ company }}">{{ company }}</option>
                                        {% endfor %}
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label><b>Select the TypeNames:</b></label><br>
                                    <select class="selectpicker form-control" id="TypeNames" name="TypeNames" required="1">
                                        <option value="" selected disabled>Select Type Name</option>
                                        <!-- Options will be dynamically populated using JavaScript -->
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label><b>Select the Memory Type:</b> </label><br>
                                    <select class="selectpicker form-control" id="Memory_Type" name="Memory_Type" required="1">
                                        {% for Memory_Type in Memory_Type %}
                                        <option value="{{ Memory_Type }}">{{ Memory_Type }}</option>
                                        {% endfor %}
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label><b>Select the Ram(GB):</b> </label><br>
                                    <select class="selectpicker form-control" id="Rams" name="Rams" required="1">
                                        {% for Ram in Rams %}
                                        <option value="{{ Ram }}">{{ Ram }}</option>
                                        {% endfor %}
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label><b>Select the Cpu:</b> </label><br>
                                    <select class="selectpicker form-control" id="Cpu" name="Cpu" required="1">
                                        <option value="" selected disabled>Select Cpu</option>
                                        <!-- Options will be dynamically populated using JavaScript -->
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label><b>Select the Inches:</b> </label><br>
                                    <select class="selectpicker form-control" id="Inches" name="Inches" required="1">
                                        {% for Inche in Inches %}
                                        <option value="{{ Inche }}">{{ Inche }}</option>
                                        {% endfor %}
                                    </select>
                                </div>

                            </div>

                            <!-- Second Column -->
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="products"><b>Select the product:</b></label>
                                    <select class="selectpicker form-control" id="products" name="products" required="1">
                                        <option value="" selected disabled>Select Product</option>
                                        <!-- Options will be dynamically populated using JavaScript -->
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label><b>Select the Operating System:</b></label><br>
                                    <select class="selectpicker form-control" id="OpSys" name="OpSys" required="1">
                                        <option value="" selected disabled>Select Operating System</option>
                                        <!-- Options will be dynamically populated using JavaScript -->
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label><b>Select the Memory Size (GB):</b> </label><br>
                                    <select class="selectpicker form-control" id="Memory_Size" name="Memory_Size" required="1">
                                        {% for Memory_Size in Memory_Size %}
                                        <option value="{{ Memory_Size }}">{{ Memory_Size }}</option>
                                        {% endfor %}
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label><b>Select the ScreenResolution:</b> </label><br>
                                    <select class="selectpicker form-control" id="ScreenResolution" name="ScreenResolution" required="1">
                                        {% for ScreenResolution in ScreenResolution %}
                                        <option value="{{ ScreenResolution }}">{{ ScreenResolution }}</option>
                                        {% endfor %}
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label><b>Select the Gpu:</b> </label><br>
                                    <select class="selectpicker form-control" id="Gpu" name="Gpu">
                                        <option value="" selected disabled>Select Gpu</option>
                                        <!-- Options will be dynamically populated using JavaScript -->
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label><b>Select the Weight:</b> </label><br>
                                    <select class="selectpicker form-control" id="Weight" name="Weight" required="1">
                                        {% for Weight in Weight %}
                                        <option value="{{ Weight }}">{{ Weight }}</option>
                                        {% endfor %}
                                    </select>
                                </div>

                            </div>
                        </div>
                        <!-- Add more rows and columns as needed -->
                        <div class="row">
                            <div class="col-md-8 form-group" style="/* text-align: center; */padding-left: 90px;margin-left: 13%;">
                                <button class="btn btn-primary form-control" onclick="send_data()">Predict Price</button>
                            </div>
                        </div>
                    </form>
                    <div class="row">
                        <div class="col-12" style="text-align: center">
                            <h4><span id="prediction"></span></h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap JS and other scripts -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
        integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0/dist/tf.min.js"></script>

<!-- Your custom JavaScript -->
<script>
    $(document).ready(function () {
        $('#Companies').change(function () {
            var selectedCompany = $(this).val();
            console.log('Selected Company:', selectedCompany);  // Log the selected company
            $.ajax({
                type: 'POST',
                url: '/',
                data: { company: selectedCompany },
                success: function (response) {
                    var productsSelect = $('#products');
                    productsSelect.empty();
                    $.each(response.products, function (index, product) {
                        productsSelect.append($('<option></option>').attr('value', product).text(product));
                    });

                    var typeNamesSelect = $('#TypeNames');
                    typeNamesSelect.empty();
                    $.each(response.typeNames, function (index, typeName) {
                        typeNamesSelect.append($('<option></option>').attr('value', typeName).text(typeName));
                    });

                    var opSysSelect = $('#OpSys');
                    opSysSelect.empty();
                    $.each(response.opSys, function (index, os) {
                        opSysSelect.append($('<option></option>').attr('value', os).text(os));
                    });

                    var CpuSelect = $('#Cpu');
                    CpuSelect.empty();
                    $.each(response.Cpu, function (index, os) {
                        CpuSelect.append($('<option></option>').attr('value', os).text(os));
                    });

                    var GpuSelect = $('#Gpu');
                    GpuSelect.empty();
                    $.each(response.Gpu, function (index, os) {
                        GpuSelect.append($('<option></option>').attr('value', os).text(os));
                    });
                }
            });
        });
    });



    function form_handler(event) {
        event.preventDefault(); // Don't submit the form normally
    }
    function send_data()
    {
        document.querySelector('form').addEventListener("submit",form_handler);

        var fd=new FormData(document.querySelector('form'));

        var xhr= new XMLHttpRequest({mozSystem: true});

        xhr.open('POST','/predict',true);
        document.getElementById('prediction').innerHTML="Wait! Predicting Price.....";
        xhr.onreadystatechange = function(){
            if(xhr.readyState == XMLHttpRequest.DONE){
                document.getElementById('prediction').innerHTML="Prediction: Rs."+xhr.responseText;

            }
        };

        xhr.onload= function(){};

        xhr.send(fd);
    }
</script>

</body>
</html>
